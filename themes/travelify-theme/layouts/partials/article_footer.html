{{ if not .Params.meta_disable }}
<div class="entry-meta-bar clearfix">
  <div class="entry-meta">
    {{ if isset .Params "author" }}
    <span class="byline">
      <span class="author vcard">
        {{ $url := printf "author/%s" (.Params.author | urlize | lower) }}
        <a class="url fn n" href="{{ $url | absURL }}">{{ .Params.author | lower }}</a>
      </span>
    </span>
    {{ end }}

    {{ if not .Params.nodateline }}
    <span class="posted-on">
      <time class="entry-date published" datetime="{{ .Date }}" itemprop="datePublished">{{ .Date.Format .Site.Params.date_format }}</time>
    </span>
    {{ end }}
    
    {{ if isset .Params "categories" }}
    {{ $categoriesLen := len .Params.categories }}
    {{ if gt $categoriesLen 0 }}
    <span class="category">
      {{ range $k, $v := .Params.categories }}
      {{ $url := printf "%s/%s" "categories" (. | urlize | lower) }}
      <a class="article-category-link" href="{{ $url | absURL }}">{{ . }}</a>
      {{ if lt $k (sub $categoriesLen 1) }},{{ end }}
      {{ end }}
    </span>
    {{ end }}
    {{ end }}
    <span class="share">
      <a data-url="{{ .Permalink }}" data-id="{{ .UniqueID }}" class="article-share-link">
        <i class="fa fa-share"></i>
        {{with .Site.Data.l10n.articles.share}}{{.}}{{end}}
      </a>
       <script>
    (function ($) {
        // Prevent duplicate binding
        if (typeof(__SHARE_BUTTON_BINDED__) === 'undefined' || !__SHARE_BUTTON_BINDED__) {
            __SHARE_BUTTON_BINDED__ = true;
        } else {
            return;
        }
        $('body').on('click', function() {
            $('.article-share-box.on').removeClass('on');
        }).on('click', '.article-share-link', function(e) {
            e.stopPropagation();
            var $this = $(this),
                url = $this.attr('data-url'),
                encodedUrl = encodeURIComponent(url),
                id = 'article-share-box-' + $this.attr('data-id'),
                offset = $this.offset(),
                box;
            if ($('#' + id).length) {
                box = $('#' + id);
                if (box.hasClass('on')){
                    box.removeClass('on');
                    return;
                }
            } else {
                var html = [
                    '<div id="' + id + '" class="article-share-box">',
                        '<input class="article-share-input" value="' + url + '">',
                        '<div class="article-share-links">',
                            '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="fa fa-twitter article-share-twitter" target="_blank" title="Twitter"></a>',
                            '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="fa fa-facebook article-share-facebook" target="_blank" title="Facebook"></a>',
                            '<a href="http://pinterest.com/pin/create/button/?url=' + encodedUrl + '" class="fa fa-pinterest article-share-pinterest" target="_blank" title="Pinterest"></a>',
                            '<a href="https://plus.google.com/share?url=' + encodedUrl + '" class="fa fa-google article-share-google" target="_blank" title="Google+"></a>',
                        '</div>',
                    '</div>'
                ].join('');
              box = $(html);
              $('body').append(box);
            }
            $('.article-share-box.on').hide();
            box.css({
                top: offset.top + 25,
                left: offset.left
            }).addClass('on');
        }).on('click', '.article-share-box', function (e) {
            e.stopPropagation();
        }).on('click', '.article-share-box-input', function () {
            $(this).select();
        }).on('click', '.article-share-box-link', function (e) {
            e.preventDefault();
            e.stopPropagation();
            window.open(this.href, 'article-share-box-window-' + Date.now(), 'width=500,height=450');
        });
    })(jQuery);
    </script>
    </span>
    {{ if and (not (eq .Site.DisqusShortname "")) (not .Params.disable_comments) }}
    <span class="comments">
      <a href="{{ .Permalink }}#disqus_thread">{{with .Site.Data.l10n.articles.comments}}{{.}}{{end}}
      </a>
    </span>
    {{ end }}
  </div>
  {{ else }}

{{ end }}
